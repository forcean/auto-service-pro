<div class="min-h-screen bg-[#0f172a] py-10 px-4">
  <div class="max-w-3xl mx-auto flex justify-end gap-3 mb-6">
    <button
      class="px-5 py-2 rounded-lg bg-yellow-400 hover:bg-yellow-500"
      *ngIf="!isEditMode"
      (click)="toggleEdit()">
      แก้ไข
    </button>

    <button
      class="px-5 py-2 rounded-lg bg-gray-200 hover:bg-gray-300"
      (click)="onDelete()">
      ลบผู้ใช้งาน
    </button>
  </div>

  <div class="bg-white w-full max-w-3xl mx-auto rounded-xl p-8 shadow-lg">

    <h2 class="font-bold text-gray-800 text-2xl mb-6">
      รายละเอียดผู้ใช้งาน
    </h2>

    <form [formGroup]="form" class="space-y-6">

      <div>
        <label class="block text-gray-700 mb-1">Username</label>
        <input type="text" formControlName="username"
          class="form-input-custom bg-gray-100" />
      </div>

      <div>
        <label class="block mb-1 text-gray-700">ชื่อ</label>
        <input type="text" formControlName="name" class="form-input-custom" />
      </div>

      <div>
        <label class="block mb-1 text-gray-700">นามสกุล</label>
        <input type="text" formControlName="surname"
          class="form-input-custom" />
      </div>

      <div>
        <label class="block mb-1 text-gray-700">Role</label>
        <custom-select formControlName="role" (change)="onRoleChange()"
          [isDisabled]="!isEditMode">
          <custom-option value="ADM">Admin</custom-option>
          <custom-option value="MNG">Manager</custom-option>
          <custom-option value="ACC">Accountant</custom-option>
          <custom-option value="SAL">Sale</custom-option>
          <custom-option value="STC">Stock Controller</custom-option>
          <custom-option value="MEC">Mechanic</custom-option>
        </custom-select>
      </div>

      <div *ngIf="mustSelectManager">
        <label class="block mb-1 text-gray-700">สังกัด Manager</label>
        <custom-select formControlName="managerId" [isDisabled]="!isEditMode">
          <custom-option *ngFor="let m of managerList" [value]="m.id">
            {{ m.firstname }} {{ m.lastname }}
          </custom-option>
        </custom-select>
      </div>

      <div>
        <label class="block mb-1 text-gray-700">Email</label>
        <input type="email" formControlName="email" class="form-input-custom" />
      </div>

      <div>
        <label class="block mb-1 text-gray-700">Phone Number</label>
        <input type="text" formControlName="phoneNumber"
          class="form-input-custom" />
      </div>

      <div *ngIf="isEditMode" class="pt-4 flex gap-3">
        <button type="button"
          class="w-full bg-gray-200 hover:bg-gray-300 py-3 rounded-lg font-semibold"
          (click)="onCancelEdit()">
          ยกเลิก
        </button>
        <button type="button"
          class="w-full bg-yellow-400 hover:bg-yellow-500 py-3 rounded-lg font-semibold"
          (click)="onSubmit()">
          บันทึกข้อมูล
        </button>
      </div>

    </form>
  </div>
</div>

<app-modal-condition
  (onConfirm)="handleOnModalConfirm($event)"
  [isLoading]="isLoadingDelete"></app-modal-condition>