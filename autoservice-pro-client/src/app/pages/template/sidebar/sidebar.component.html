<nav class="flex flex-col h-full text-gray-700">
    <ul class="flex-1 space-y-1 px-2 py-3 select-none">
        <li *ngFor="let menu of menus" class="relative">
            <!-- เมนูหลัก -->
            <div
                class="flex items-center px-3 py-2 rounded-md cursor-pointer hover:bg-gray-100 transition"
                (click)="menu.children?.length ? toggleExpand(menu.key) : navigate(menu.endpoint)">
                <!-- icon -->
                <div
                    class="relative flex items-center justify-center w-5 h-5 mr-2"
                    [ngClass]="{
            'before:content-[\'\'] before:absolute before:w-2 before:h-2 before:rounded-full before:bg-lime-400 before:translate-x-1/3 before:translate-y-[-50%]':
              isActiveParentMenu(menu)
          }">
                    <img [src]="menu.icon" alt="icon" class="w-5 h-5" />
                </div>

                <!-- ชื่อเมนู -->
                <span class="text-sm" *ngIf="!isMinibar">{{ menu.displayName
                    }}</span>

                <!-- expand icon -->
                <span *ngIf="menu.children?.length && !isMinibar"
                    class="ml-auto">
                    <img
                        [src]="expands[menu.key] ? 'assets/img/icon.expand.open.svg' : 'assets/img/icon.expand.close.svg'"
                        class="w-3 h-3 transition-transform duration-200"
                        [ngClass]="{ 'rotate-180': expands[menu.key] }" />
                </span>
            </div>

            <!-- เมนูย่อย -->
            <div
                *ngIf="menu.children?.length && expands[menu.key] && !isMinibar"
                class="pl-6 mt-1 space-y-1">
                <div
                    *ngFor="let child of menu.children"
                    (click)="navigate(child.endpoint)"
                    class="px-3 py-1.5 text-sm rounded-md cursor-pointer transition"
                    [ngClass]="{
            'bg-lime-400 font-semibold text-gray-900': isActiveMenu(child.endpoint),
            'hover:bg-gray-100': !isActiveMenu(child.endpoint)
          }">
                    {{ child.displayName }}
                </div>
            </div>
        </li>
    </ul>
</nav>
