<div class="product-detail">

  <div class="header-card header-flex">
    <div class="header-left">
      <button
        class="back-link mb-2"
        (click)="goBack()">
        <lucide-icon name="chevron-left"></lucide-icon>
        ย้อนกลับ
      </button>

      <!-- Title -->
      <div class="title-row">
        <h1 class="product-name">
          {{ product.name }}
        </h1>

        <span
          class="status-badge"
          [ngClass]="product.status">
          {{ product.status | uppercase }}
        </span>
      </div>

      <!-- SKU -->
      <!-- SKU -->
      <div class="product-sku">
        SKU:
        <span>{{ product.code }}</span>

        <button
          class="copy-sku-btn"
          title="คัดลอก SKU"
          (click)="copySku()">
          <lucide-icon
            [name]="skuCopied ? 'check' : 'copy'">
          </lucide-icon>
        </button>
      </div>

      <div class="product-meta">
        <span>{{ product.brandName }}</span>
        <span class="dot">•</span>
        <span>{{ product.categoryName }}</span>
      </div>

    </div>

    <!-- Right -->
    <div class="header-right">
      <button
        class="icon-action"
        title="แก้ไขสินค้า"
        (click)="goEdit()">
        <lucide-icon name="pencil"></lucide-icon>
      </button>
    </div>

  </div>

  <section class="main-grid">

    <div class="left-col space-y-6">

      <div class="card image-card">
        <img
          [src]="mainImageUrl"
          alt="product image" />
      </div>

      <div *ngIf="galleryImages.length" class="card">
        <h2 class="section-title">แกลเลอรี่สินค้า</h2>

        <div class="gallery">
          <img
            *ngFor="let img of galleryImages"
            [src]="img.url"
            (click)="preview(img.url)" />
        </div>
      </div>

    </div>

    <div class="right-col space-y-6">

      <div class="card">
        <h2 class="section-title">ราคา</h2>

        <div
          *ngFor="let p of product.prices"
          class="price-row">
          <span class="price-type">{{ p.type }}</span>
          <span class="price-amount">
            {{ p.amount | number }} บาท
          </span>
        </div>
      </div>

      <div *ngIf="product.spec" class="card">
        <h2 class="section-title">ข้อมูลจำเพาะ</h2>

        <div class="spec-grid">
          <div
            *ngFor="let s of specEntries"
            class="spec-item">
            <div class="spec-label">
              {{ s.label }}
            </div>
            <div class="spec-value">
              {{ s.value }}
            </div>
          </div>
        </div>
      </div>

    </div>

  </section>

  <section *ngIf="product.vehicles?.length" class="card">
    <h2 class="section-title">รถที่รองรับ</h2>

    <div class="vehicle-grid">
      <div
        *ngFor="let v of product.vehicles"
        class="vehicle-card">
        <div class="vehicle-name">
          {{ v.brand }} {{ v.model }}
        </div>
        <div class="vehicle-year">
          {{ v.yearFrom }} – {{ v.yearTo }}
        </div>
      </div>
    </div>
  </section>

</div>
