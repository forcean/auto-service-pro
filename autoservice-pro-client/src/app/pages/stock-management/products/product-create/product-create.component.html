<form
  [formGroup]="form"
  class="max-w-6xl mx-auto p-6 space-y-8 text-sm">

  <!-- Header -->
  <div class="flex items-center justify-between">
    <h1 class="text-xl font-semibold text-white">Create Product</h1>
    <span class="text-xs text-slate-400">AutoServicePro</span>
  </div>

  <!-- Product Info -->
  <section class="card">
    <h2 class="section-title">Product Information</h2>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <div>
        <label class="label">Product Name *</label>
        <input class="input" formControlName="name" />
      </div>

      <div>
        <label class="label">Status *</label>
        <select class="input" formControlName="status">
          <option value="active">Active</option>
          <option value="inactive">Inactive</option>
          <option value="out_of_stock">Out of stock</option>
          <option value="discontinued">Discontinued</option>
        </select>
      </div>

      <div class="md:col-span-2">
        <label class="label">Description</label>
        <textarea class="input h-24"
          formControlName="description"></textarea>
      </div>
    </div>
  </section>

  <!-- Category / Brand -->
  <section class="card">
    <h2 class="section-title">Category & Brand</h2>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <div>
        <label class="label">Category *</label>
        <custom-select
          placeholder="Select category"
          formControlName="categoryId">

          <custom-category-option
            *ngFor="let cat of categories"
            [node]="cat">
          </custom-category-option>

        </custom-select>

      </div>

      <div>
        <label class="label">Brand *</label>
        <select class="input" formControlName="brandId">
          <option *ngFor="let b of brands" [value]="b.id">
            {{ b.name }}
          </option>
        </select>
      </div>
    </div>
  </section>

  <!-- Vehicle Compatibility -->
  <section class="card">
    <h2 class="section-title">Vehicle Compatibility</h2>

    <div formArrayName="vehicles" class="space-y-4">
      <div
        *ngFor="let v of vehicles.controls; let i = index"
        [formGroupName]="i"
        class="border border-slate-700 rounded-lg p-4 space-y-3">

        <div class="grid grid-cols-1 md:grid-cols-4 gap-3">
          <input class="input" placeholder="Vehicle ID"
            formControlName="vehicleId" />

          <input type="number" class="input"
            placeholder="From Year"
            formControlName="from" />

          <input type="number" class="input"
            placeholder="To Year"
            formControlName="to" />

          <input class="input"
            placeholder="Engines (2.0,2.5)"
            formControlName="engines" />
        </div>

        <input class="input"
          placeholder="Remark"
          formControlName="remark" />

        <button type="button"
          class="text-red-400 text-xs"
          (click)="removeVehicle(i)">
          Remove
        </button>
      </div>
    </div>

    <button type="button"
      class="btn-secondary mt-3"
      (click)="addVehicle()">
      + Add Vehicle
    </button>
  </section>

  <!-- Prices -->
  <section class="card">
    <h2 class="section-title">Pricing</h2>

    <div formArrayName="prices"
      class="grid grid-cols-1 md:grid-cols-3 gap-4">
      <div *ngFor="let p of prices.controls; let i = index"
        [formGroupName]="i">
        <label class="label">{{ p.value.type }}</label>
        <input type="number" class="input"
          formControlName="amount" />
      </div>
    </div>
  </section>

  <!-- Spec -->
  <section class="card">
    <h2 class="section-title">Specification</h2>

    <div formGroupName="spec"
      class="grid grid-cols-2 md:grid-cols-5 gap-3">
      <input class="input" placeholder="Unit" formControlName="unit" />
      <input type="number" class="input" placeholder="Weight"
        formControlName="weight" />
      <input type="number" class="input" placeholder="Width"
        formControlName="width" />
      <input type="number" class="input" placeholder="Height"
        formControlName="height" />
      <input type="number" class="input" placeholder="Depth"
        formControlName="depth" />
    </div>
  </section>

  <!-- Images -->
  <section class="card">
    <h2 class="section-title">Images *</h2>

    <app-file-upload
      (uploaded)="onTempImageAdded($event)">
    </app-file-upload>
  </section>

  <!-- Action -->
  <div class="flex justify-end gap-3">
    <button class="btn-secondary" type="button">Cancel</button>
    <button class="btn-primary"
      type="submit"
      (click)="submit()">
      Save Product
    </button>
  </div>
</form>
